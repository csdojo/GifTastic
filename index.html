<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

    <title>Document</title>

    <style type="text/css">
        .animal {
            float: left;
            margin: auto;
        }

        .gifcool {
            height: 150px;
        }
    </style>
</head>

<body>

    <div class="row">
        <div id="button-view" class="col-11">

        </div>
    </div>

    <div class="row">
        <div id="gif-view" class="col-8">

        </div>


        <div class="col-4">
            <form id="animal-form">
                <label for="animal-input"><strong>Add an animal, Yo!</strong></label>
                <br>
                <input style="width:350px;" type="text" id="animal-input">
                <br>
                <input style="margin-top: 10px;" id="add-animal" type="submit" value="Submit" class="btn btn-info">
            </form>
        </div>
    </div>



    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <script type="text/javascript">

        // Initial array of animals
        var animals = ["dog", "cat", "rabbit", "bird", "lion", "chicken"];

        function displayAnimalInfo() {

            var animal = $(this).attr("data-name");

            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=D2JWHM3zl3NtzjkI09tm0XnLu5QYET6s";

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {

                $("#gif-view").empty();

                for (var i = 0; i < 10; i++) {

                    //rating
                    var animalDiv = $("<div class='animal col-4'>");

                    var ratingHere = response.data[i].rating;

                    var ratingPost = $("<p class='ratingcool'>").text("Rating: " + ratingHere);

                    animalDiv.append(ratingPost);

                    //gif
                    var gifURL = response.data[i].images.original_still.url;

                    var gif = $("<img class='gifcool'>").attr("src", gifURL);

                    gif.addClass("gifcool");

                    animalDiv.append(gif);


                    $("#gif-view").prepend(animalDiv);

                    $(".gif").on("click", function () {
                        // The attr jQuery method allows us to get or set the value of any attribute on our HTML element
                        var state = $(this).attr("data-state");
                        // If the clicked image's state is still, update its src attribute to what its data-animate value is.
                        // Then, set the image's data-state to animate
                        // Else set src to the data-still value
                        if (state === "still") {
                            $(this).attr("src", $(this).attr("data-animate"));
                            $(this).attr("data-state", "animate");
                        } else {
                            $(this).attr("src", $(this).attr("data-still"));
                            $(this).attr("data-state", "still");
                        }
                    });
                }
            });
        }



        function renderButtons() {

            $("#button-view").empty();

            for (var i = 0; i < animals.length; i++) {


                var a = $("<button>");

                a.addClass("animal-btn");

                a.attr("data-name", animals[i]);

                a.text(animals[i]);

                $("#button-view").append(a);
            }
        }

        $("#add-animal").on("click", function (event) {

            event.preventDefault();

            var animal = $("#animal-input").val().trim();

            animals.push(animal);

            renderButtons();
        });

        $(document).on("click", ".animal-btn", displayAnimalInfo);

        renderButtons();


    </script>

</body>

</html>